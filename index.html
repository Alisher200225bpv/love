<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–¢—ã –º–æ—ë —á—É–¥–æ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --pink:#ff69b4;
      --rose:#ff3399;
      --light:#fff0f5;
      --shadow:rgba(255, 182, 193, 0.6);
      --bg-grad: linear-gradient(135deg, #ffccdd 0%, #ccffff 100%);
    }

    /* –ë–ê–ó–ê */
    *{ box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Segoe UI', system-ui, -apple-system, Arial, sans-serif;
      background: var(--bg-grad);
      overflow-x: hidden;
      color: #333;
    }
    h1 {
      text-align: center;
      margin: 40px 16px 10px;
      font-size: 44px;
      color: var(--rose);
      text-shadow: 0 2px 12px rgba(255,51,153,0.25);
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.04); }
      100% { transform: scale(1); }
    }
    .sub {
      text-align:center;
      color:#8a5270;
      margin-bottom: 8px;
    }

    /* –ü–ê–î–ê–Æ–©–ò–ï –°–ï–†–î–¶–ê –§–û–ù */
    .hearts {
      position: fixed;
      inset: 0;
      pointer-events: none;
    }
    .heart {
      position: absolute;
      width: 20px;
      height: 20px;
      background: url('https://i.imgur.com/Z6jmlFf.png') no-repeat center / contain;
      animation: fall 8s linear infinite;
      opacity: .8;
    }
    @keyframes fall {
      0% { top: -40px; transform: translateX(0) rotate(0); opacity: .9; }
      100% { top: 100vh; transform: translateX(40px) rotate(360deg); opacity: 0; }
    }

    /* –°–õ–ê–ô–î–ï–† –§–û–¢–û */
    .slider {
      margin: 20px auto 0;
      width: min(92vw, 760px);
      overflow: hidden;
      border-radius: 14px;
      box-shadow: 0 10px 30px rgba(0,0,0,.08);
      background: rgba(255,255,255,.45);
      backdrop-filter: blur(6px);
    }
    .slides {
      display: flex;
      transition: transform 1s ease;
    }
    .slides img {
      width: 100%;
      flex-shrink: 0;
      display: block;
      object-fit: cover;
      aspect-ratio: 3/2;
      filter: saturate(1.05) contrast(1.03);
      transform: scale(1);
      transition: transform .6s ease;
    }
    .slides img:hover{
      transform: scale(1.02);
    }

    /* –ê–£–î–ò–û */
    .audio-wrap{
      display:flex; justify-content:center; margin: 18px 0 8px;
    }
    audio {
      width: min(92vw, 760px);
      border-radius: 10px;
      background: #fff;
      box-shadow: 0 8px 18px rgba(0,0,0,.08);
    }

    /* –ö–ù–û–ü–ö–ò */
    .center { display:flex; justify-content:center; margin: 18px 0; gap: 12px; }
    .btn-primary, .btn-secondary{
      border: 0;
      padding: 12px 18px;
      border-radius: 12px;
      cursor: pointer;
      font-weight: 600;
      transition: transform .1s ease, box-shadow .2s ease, background .2s;
    }
    .btn-primary{
      color: white;
      background: linear-gradient(135deg, #ff7ab6, #ff4da0);
      box-shadow: 0 10px 18px rgba(255, 77, 160, .25);
    }
    .btn-primary:active{ transform: translateY(1px) scale(0.99); }
    .btn-secondary{
      color: #8a5270;
      background: #ffe7f1;
      box-shadow: 0 10px 18px rgba(255, 182, 193, .25);
    }
    .btn-secondary:active{ transform: translateY(1px) scale(0.99); }

    /* –ü–û–ü–ê–ü-–°–û–û–ë–©–ï–ù–ò–ï (–∏–∑ –ø–µ—Ä–≤–æ–π –≤–µ—Ä—Å–∏–∏) */
    .message {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background-color: var(--light);
      padding: 14px 20px;
      border-radius: 20px;
      box-shadow: 0 0 14px var(--shadow);
      font-size: 18px;
      color: var(--pink);
      display: none;
      z-index: 30;
    }

    /* –ú–û–î–ê–õ ¬´–ü–û–ß–ï–ú–£ –Ø –¢–ï–ë–Ø –õ–Æ–ë–õ–Æ¬ª */
    .modal.hidden { display: none; }
    .modal {
      position: fixed; inset: 0; z-index: 50;
      display: grid; place-items: center;
      background: rgba(0,0,0,.25);
      animation: fadeIn .2s ease;
    }
    @keyframes fadeIn { from{opacity:0} to{opacity:1} }
    .modal-content{
      width: min(92vw, 620px);
      background: #fff;
      border-radius: 18px;
      box-shadow: 0 20px 50px rgba(0,0,0,.18);
      padding: 22px 22px 16px;
      position: relative;
    }
    .modal-content h2{
      margin: 0 0 6px;
      color: var(--rose);
      font-size: 26px;
      text-align:center;
    }
    .modal-content p{
      font-size: 18px;
      line-height: 1.5;
      text-align: center;
      margin: 8px auto 16px;
      color: #543646;
    }
    .modal-actions{
      display:flex; justify-content:center; gap: 10px;
    }
    .close {
      position: absolute; right: 10px; top: 10px;
      border: 0; background: transparent; font-size: 26px;
      color: #b06; cursor: pointer;
    }

    /* –í–°–ü–õ–´–í–ê–Æ–©–ò–ï –°–ï–†–î–¶–ê –ü–†–ò –ö–õ–ò–ö–ï –ù–ê –ö–ù–û–ü–ö–£ */
    .pop-heart{
      position: fixed; pointer-events:none; z-index: 60;
      font-size: 18px; opacity: 0.9;
      animation: rise 900ms ease forwards;
      filter: drop-shadow(0 4px 8px rgba(255,77,160,.35));
    }
    @keyframes rise{
      0%{ transform: translate(-50%, -10px) scale(.9); opacity: 0 }
      20%{ opacity: 1 }
      100%{ transform: translate(-50%, -90px) scale(1.25); opacity: 0 }
    }
  </style>
</head>
<body>

  <h1>–¢—ã –º–æ—ë —Å—á–∞—Å—Ç—å–µ. –Ø —Ç–µ–±—è –ª—é–±–ª—é</h1>
  <p class="sub">–°–∞–π—Ç –¥–ª—è —Ç–µ–±—è, –ª—é–±–∏–º–∞—è üíñ</p>

  <!-- –§–æ–Ω–æ–≤—ã–µ —Å–µ—Ä–¥–µ—á–∫–∏ -->
  <div class="hearts" aria-hidden="true">
    <div class="heart" style="left: 8%;  animation-delay: .0s;"></div>
    <div class="heart" style="left: 22%; animation-delay: 1.2s;"></div>
    <div class="heart" style="left: 36%; animation-delay: .6s;"></div>
    <div class="heart" style="left: 52%; animation-delay: 1.8s;"></div>
    <div class="heart" style="left: 68%; animation-delay: .9s;"></div>
    <div class="heart" style="left: 84%; animation-delay: 1.5s;"></div>
  </div>

  <!-- –°–ª–∞–π–¥–µ—Ä -->
  <div class="slider" aria-label="–ì–∞–ª–µ—Ä–µ—è">
    <div class="slides">
      <img src="photo1.jpeg" alt="–ú—ã –≤–¥–≤–æ—ë–º ‚Äî –º–æ–º–µ–Ω—Ç —Å—á–∞—Å—Ç—å—è">
      <img src="photo2.jpeg" alt="–°–æ–ª–Ω–µ—á–Ω—ã–π –¥–µ–Ω—å –≤–º–µ—Å—Ç–µ">
      <img src="photo3.jpeg" alt="–û—Å–æ–±–µ–Ω–Ω—ã–π –≤–µ—á–µ—Ä">
      <!-- –î–æ–±–∞–≤—å —Å–≤–æ–∏ —Ñ–æ—Ç–æ —Å—é–¥–∞ -->
    </div>
  </div>

  <!-- –ê—É–¥–∏–æ -->
  <div class="audio-wrap">
    <audio id="player" autoplay controls>
      <source src="die_with_a_smile.mp3" type="audio/mp3">
      –¢–≤–æ–π –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ.
    </audio>
  </div>

  <!-- –ö–Ω–æ–ø–∫–∞ ¬´–ü–û–ß–ï–ú–£ –Ø –¢–ï–ë–Ø –õ–Æ–ë–õ–Æ¬ª -->
  <div class="center">
    <button id="whyBtn" class="btn-primary">–ü–æ—á–µ–º—É —è —Ç–µ–±—è –ª—é–±–ª—é</button>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –ø—Ä–∏—á–∏–Ω–∞–º–∏ -->
  <div id="reasonModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="reasonTitle">
    <div class="modal-content">
      <button class="close" id="closeModal" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
      <h2 id="reasonTitle">–ü–æ—á–µ–º—É —è —Ç–µ–±—è –ª—é–±–ª—é</h2>
      <p id="reasonText">–ü–æ—Ç–æ–º—É —á—Ç–æ —Å —Ç–æ–±–æ–π –º–∏—Ä —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ç–µ–ø–ª–µ–µ.</p>
      <div class="modal-actions">
        <button id="prevReason" class="btn-secondary">–ù–∞–∑–∞–¥</button>
        <button id="nextReason" class="btn-primary">–ï—â—ë</button>
      </div>
    </div>
  </div>

  <!-- –í—Å–ø–ª—ã–≤–∞—à–∫–∞ –∏–∑ –ø–µ—Ä–≤–æ–π –≤–µ—Ä—Å–∏–∏ -->
  <div class="message" id="popup">–¢—ã –º–æ—ë —á—É–¥–æ üíñ</div>

  <script>
    // –°–ª–∞–π–¥–µ—Ä
    let index = 0;
    setInterval(() => {
      const slides = document.querySelector('.slides');
      if(!slides) return;
      index = (index + 1) % slides.children.length;
      slides.style.transform = `translateX(-${index * 100}%)`;
    }, 4000);

    // –í—Å–ø–ª—ã–≤–∞—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 3 —Å–µ–∫
    setTimeout(() => {
      const msg = document.getElementById('popup');
      if(msg) msg.style.display = 'block';
    }, 3000);

    // ===== –®–ê–ì 1: –î–∏–∞–ª–æ–≥ –ª—é–±–≤–∏ =====
    const reasons = [
      '–ü–æ—Ç–æ–º—É —á—Ç–æ —Å —Ç–æ–±–æ–π –º–∏—Ä —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ç–µ–ø–ª–µ–µ.',
      '–¢—ã —É–º–µ–µ—à—å —Å–º–µ—è—Ç—å—Å—è –≥–ª–∞–∑–∞–º–∏, –∏ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç –º–æ–π –¥–µ–Ω—å.',
      '–¢—ã –≤–µ—Ä–∏—à—å –≤ –º–µ–Ω—è –¥–∞–∂–µ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ —è —Å–æ–º–Ω–µ–≤–∞—é—Å—å.',
      '–° —Ç–æ–±–æ–π –ª—é–±–æ–µ –º–µ—Å—Ç–æ ‚Äî —ç—Ç–æ –¥–æ–º.',
      '–¢–≤–æ–∏ –æ–±—ä—è—Ç–∏—è –ª–µ—á–∞—Ç –ª—É—á—à–µ –ª—é–±—ã—Ö —Å–ª–æ–≤.',
      '–¢—ã –¥–µ–ª–∞–µ—à—å –ø—Ä–æ—Å—Ç—ã–µ –º–æ–º–µ–Ω—Ç—ã ‚Äî —Å–∞–º—ã–º–∏ –≤–∞–∂–Ω—ã–º–∏.',
      '–¢–≤–æ—è –¥–æ–±—Ä–æ—Ç–∞ ‚Äî —ç—Ç–æ —Å–∏–ª–∞.',
      '–¢—ã –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—à—å –º–µ–Ω—è –±—ã—Ç—å –ª—É—á—à–µ–π –≤–µ—Ä—Å–∏–µ–π —Å–µ–±—è.',
      '–¢—ã —É–º–µ–µ—à—å —Å–ª—É—à–∞—Ç—å —Å–µ—Ä–¥—Ü–µ–º.',
      '–° —Ç–æ–±–æ–π —Ç–∏—à–∏–Ω–∞ –∑–≤—É—á–∏—Ç –∫–∞–∫ –º—É–∑—ã–∫–∞.',
      '–¢—ã ‚Äî –º–æ—ë –º–∞–ª–µ–Ω—å–∫–æ–µ —á—É–¥–æ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å.',
      '–Ø –ª—é–±–ª—é —Ç–µ–±—è –ø—Ä–æ—Å—Ç–æ –ø–æ—Ç–æ–º—É, —á—Ç–æ —Ç—ã ‚Äî —Ç—ã.'
    ];
    let current = Number(localStorage.getItem('reasonIndex') || 0);

    const modal = document.getElementById('reasonModal');
    const reasonText = document.getElementById('reasonText');
    const whyBtn = document.getElementById('whyBtn');
    const nextBtn = document.getElementById('nextReason');
    const prevBtn = document.getElementById('prevReason');
    const closeBtn = document.getElementById('closeModal');

    function updateReason() {
      reasonText.textContent = reasons[(current % reasons.length + reasons.length) % reasons.length];
      localStorage.setItem('reasonIndex', current);
    }
    function openModal() {
      modal.classList.remove('hidden');
      updateReason();
    }
    function closeModal() {
      modal.classList.add('hidden');
    }

    // –°–µ—Ä–¥–µ—á–∫–∏ –ø—Ä–∏ –∫–ª–∏–∫–µ
    function shootHeartsAround(el, count = 10){
      const rect = el.getBoundingClientRect();
      const cx = rect.left + rect.width/2;
      const cy = rect.top + rect.height/2;
      for(let i=0;i<count;i++){
        const span = document.createElement('span');
        span.className = 'pop-heart';
        span.textContent = ['üíó','üíñ','üíû'][i % 3];
        const dx = (Math.random() - 0.5) * 120;
        const dy = (Math.random() - 0.5) * 20;
        span.style.left = (cx + dx) + 'px';
        span.style.top  = (cy + dy) + 'px';
        span.style.animationDelay = (Math.random()*120) + 'ms';
        span.style.fontSize = (16 + Math.random()*10) + 'px';
        document.body.appendChild(span);
        setTimeout(()=> span.remove(), 1200);
      }
    }

    whyBtn.addEventListener('click', () => {
      openModal();
      shootHeartsAround(whyBtn, 12);
    });
    nextBtn.addEventListener('click', () => {
      current++;
      updateReason();
      shootHeartsAround(nextBtn, 6);
    });
    prevBtn.addEventListener('click', () => {
      current--;
      updateReason();
    });
    closeBtn.addEventListener('click', closeModal);
    modal.addEventListener('click', (e) => {
      if(e.target === modal) closeModal();
    });
    document.addEventListener('keydown', (e) => {
      if(e.key === 'Escape') closeModal();
      if(e.key === 'ArrowRight' && !modal.classList.contains('hidden')) { current++; updateReason(); }
      if(e.key === 'ArrowLeft' && !modal.classList.contains('hidden')) { current--; updateReason(); }
    });

    // –ü–æ–¥—Å–∫–∞–∑–∫–∞: –∏–∑-–∑–∞ –±—Ä–∞—É–∑–µ—Ä–Ω–æ–π –ø–æ–ª–∏—Ç–∏–∫–∏ –∞–≤—Ç–æ–ø–ª–µ–π –º–æ–∂–µ—Ç –Ω–∞—á–∞—Ç—å –∏–≥—Ä–∞—Ç—å –±–µ–∑ –∑–≤—É–∫–∞, –ø–æ–∫–∞ –Ω–µ—Ç –∫–ª–∏–∫–∞.
    // –ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü–µ–π –∑–≤—É–∫ –≤–∫–ª—é—á–∏—Ç—Å—è.
  </script>
</body>
</html>
